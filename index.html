<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubWatch</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f5f5f5;
  margin: 0;
  padding: 20px;
}
.card {
  background: #fff;
  border-radius: 16px;
  padding: 20px;
  max-width: 420px;
  margin: auto;
}
input, button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  font-size: 16px;
}
button {
  border: none;
  border-radius: 8px;
  background: #e0e0e0;
}
.warning {
  color: #d97706;
  font-weight: bold;
}
.hidden {
  display: none;
}
</style>
</head>

<body>

<!-- åˆ©ç”¨è¦ç´„ç”»é¢ -->
<div id="terms" class="card hidden">
  <h1>SubWatch</h1>
  <p>ğŸ“œ åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¦ãã ã•ã„</p>
  <label>
    <input type="checkbox" id="human"> ç§ã¯äººé–“ã§ã™
  </label>
  <button onclick="agree()">åŒæ„ã—ã¦å§‹ã‚ã‚‹</button>
</div>

<!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
<div id="app" class="card hidden">
  <h1>SubWatch</h1>

  <input id="name" placeholder="ã‚µãƒ–ã‚¹ã‚¯å">
  <input id="price" type="number" placeholder="æœˆé¡æ–™é‡‘">
  <button onclick="add()">è¿½åŠ </button>

  <p id="warning" class="warning hidden">
    âš  è¿½åŠ ã—ã™ãã¦ã¾ã›ã‚“ã‹ï¼Ÿæœˆé¡5ä¸‡å††ã‚’è¶…ãˆã¦ã„ã¾ã™
  </p>

  <ul id="list"></ul>
  <h3 id="total">åˆè¨ˆï¼ˆæœˆé¡ï¼‰ï¼šÂ¥0</h3>

  <hr>

  <h3>ğŸ”’ ç®¡ç†è€…è§£é™¤</h3>
  <input id="adminPass" type="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
  <button onclick="unlock()">è§£é™¤</button>
</div>

<script>
let locked = false;

window.onload = () => {
  if (localStorage.getItem("agreed") === "true") {
    showApp();
  } else {
    document.getElementById("terms").classList.remove("hidden");
  }
  render();
};

function agree() {
  if (!document.getElementById("human").checked) {
    alert("äººé–“ç¢ºèªã—ã¦ãã ã•ã„");
    return;
  }
  localStorage.setItem("agreed", "true");
  showApp();
}

function showApp() {
  document.getElementById("terms").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");
}

function add() {
  if (locked) return alert("ç¾åœ¨ãƒ­ãƒƒã‚¯ä¸­ã§ã™");

  const name = name.value;
  const price = Number(price.value);
  if (!name || !price) return;

  const data = JSON.parse(localStorage.getItem("subs") || "[]");
  data.push({ name, price });
  localStorage.setItem("subs", JSON.stringify(data));
  render();
}

function render() {
  const data = JSON.parse(localStorage.getItem("subs") || "[]");
  const list = document.getElementById("list");
  list.innerHTML = "";

  let total = 0;
  data.forEach(s => {
    total += s.price;
    const li = document.createElement("li");
    li.textContent = `${s.name}ï¼šÂ¥${s.price}`;
    list.appendChild(li);
  });

  document.getElementById("total").textContent =
    `åˆè¨ˆï¼ˆæœˆé¡ï¼‰ï¼šÂ¥${total}`;

  document.getElementById("warning").classList.toggle(
    "hidden",
    total <= 50000
  );
}

function unlock() {
  if (adminPass.value === "0823") {
    locked = false;
    alert("è§£é™¤ã—ã¾ã—ãŸ");
  } else {
    alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é•ã„ã¾ã™");
  }
}
</script>

</body>
</html>
