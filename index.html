<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubWatch（サブウォッチ）</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f2f2f7;
  margin: 0;
  padding: 20px;
}

h1 { text-align: center; }

.card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

input, button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  font-size: 16px;
  border-radius: 8px;
}

button {
  background: #007aff;
  color: white;
  border: none;
}

.list-item {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
}

/* モーダル */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.modal-content {
  background: white;
  padding: 24px;
  border-radius: 14px;
  width: 90%;
  max-width: 320px;
  text-align: center;
}

.hidden { display: none; }
</style>
</head>

<body>

<!-- 起動モーダル -->
<div id="modal1" class="modal hidden">
  <div class="modal-content">
    <h2>SubWatch（サブウォッチ）へようこそ</h2>
    <button onclick="nextModal()">次へ</button>
  </div>
</div>

<div id="modal2" class="modal hidden">
  <div class="modal-content">
    <h2>保存機能が搭載されました</h2>
    <button onclick="closeModal()">閉じる</button>
  </div>
</div>

<h1>SubWatch（サブウォッチ）</h1>

<div class="card">
  <input id="nameInput" type="text" placeholder="サブスク名">
  <input id="priceInput" type="number" placeholder="月額料金（円）">
  <button onclick="addSub()">追加</button>
</div>

<div class="card">
  <div id="list"></div>
  <h3>合計: ¥<span id="total">0</span></h3>
</div>

<script>
const nameInput = document.getElementById("nameInput");
const priceInput = document.getElementById("priceInput");
const list = document.getElementById("list");
const totalEl = document.getElementById("total");

let subs = JSON.parse(localStorage.getItem("subs")) || [];

// 初期表示
render();

// 追加処理
function addSub() {
  const name = nameInput.value.trim();
  const price = Number(priceInput.value);

  if (!name || price <= 0) return;

  subs.push({ name, price });
  localStorage.setItem("subs", JSON.stringify(subs));

  nameInput.value = "";
  priceInput.value = "";

  render();
}

// 表示更新
function render() {
  list.innerHTML = "";
  let total = 0;

  subs.forEach(sub => {
    const div = document.createElement("div");
    div.className = "list-item";
    div.innerHTML = `<span>${sub.name}</span><span>¥${sub.price}</span>`;
    list.appendChild(div);
    total += sub.price;
  });

  totalEl.textContent = total;
}

/* モーダル制御 */
const modal1 = document.getElementById("modal1");
const modal2 = document.getElementById("modal2");

if (!localStorage.getItem("subwatch_welcome")) {
  modal1.classList.remove("hidden");
}

function nextModal() {
  modal1.classList.add("hidden");
  modal2.classList.remove("hidden");
}

function closeModal() {
  modal2.classList.add("hidden");
  localStorage.setItem("subwatch_welcome", "true");
}
</script>

</body>
</html>
