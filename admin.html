<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubWatch ç®¡ç†äºº</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system;
  background: #0b0b0b;
  color: white;
  overflow: hidden; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç„¡åŠ¹ã§ã‚‚OK */
}

.center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  text-align: center;
}

.hidden {
  display: none;
}

.card {
  background: #1c1c1e;
  padding: 20px;
  border-radius: 16px;
  margin-top: 20px;
}

input {
  padding: 14px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  width: 220px;
  text-align: center;
}

button {
  padding: 14px;
  font-size: 16px;
  border-radius: 14px;
  border: none;
  width: 100%;
}

.btn-primary {
  background: #0a84ff;
  color: white;
}

.btn-danger {
  background: #ff453a;
  color: white;
}

button:disabled {
  opacity: 0.35;
}

.notice {
  color: #ff9f0a;
  margin-top: 12px;
}
</style>
</head>

<body>

<!-- ğŸ” ãƒ­ãƒƒã‚¯ç”»é¢ -->
<div id="lock" class="center">
  <div>
    <h2>ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h2>
    <input type="password" id="passcode" placeholder="****">
    <br><br>
    <button class="btn-primary" onclick="checkPass()">è§£é™¤</button>
    <p class="notice">â€» ä¸‹ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã§é–²è¦§ã®ã¿å¯èƒ½</p>
  </div>
</div>

<!-- ğŸ›  ç®¡ç†äººç”»é¢ -->
<div id="admin" class="hidden center">
  <div style="width:90%;max-width:420px;">
    <h1>SubWatch ç®¡ç†äºº</h1>

    <p id="viewOnly" class="notice" style="display:none;">
      â€»é–²è¦§ãƒ¢ãƒ¼ãƒ‰ï¼ˆå¤‰æ›´ä¸å¯ï¼‰
    </p>

    <div class="card">
      <h3>Pro çŠ¶æ…‹</h3>
      <p id="statusText"></p>

      <button id="enableBtn" class="btn-primary">Pro ã‚’æœ‰åŠ¹åŒ–</button>
      <br><br>
      <button id="disableBtn" class="btn-danger">Pro ã‚’ç„¡åŠ¹åŒ–</button>
    </div>
  </div>
</div>

<script>
let unlocked = false;
let startY = null;
let swipeTriggered = false;

function updateStatus() {
  const enabled = localStorage.getItem("proEnabled") !== "false";
  statusText.textContent =
    enabled ? "ç¾åœ¨ï¼šPro åˆ©ç”¨å¯èƒ½" : "ç¾åœ¨ï¼šPro åˆ©ç”¨ä¸å¯";
}

function lockButtons() {
  enableBtn.disabled = true;
  disableBtn.disabled = true;
}

function unlockButtons() {
  enableBtn.disabled = false;
  disableBtn.disabled = false;
}

// ğŸ”“ ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰è§£é™¤
function checkPass() {
  if (passcode.value === "0823") {
    unlocked = true;
    lock.classList.add("hidden");
    admin.classList.remove("hidden");
    viewOnly.style.display = "none";
    unlockButtons();
    updateStatus();
  } else {
    alert("ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
}

// ğŸ‘‡ iOSå¯¾å¿œãƒ»ç¢ºå®Ÿã«å‹•ãã‚¹ãƒ¯ã‚¤ãƒ—æ¤œçŸ¥
document.body.addEventListener("touchstart", e => {
  startY = e.touches[0].clientY;
  swipeTriggered = false;
}, { passive: true });

document.body.addEventListener("touchmove", e => {
  if (unlocked || swipeTriggered || startY === null) return;

  const currentY = e.touches[0].clientY;
  if (currentY - startY > 90) {
    swipeTriggered = true;

    lock.classList.add("hidden");
    admin.classList.remove("hidden");
    viewOnly.style.display = "block";
    lockButtons();
    updateStatus();
  }
}, { passive: true });

// ğŸŸ¢ Pro ON
enableBtn.onclick = () => {
  if (!unlocked) return;
  localStorage.setItem("proEnabled", "true");
  updateStatus();
};

// ğŸ”´ Pro OFF
disableBtn.onclick = () => {
  if (!unlocked) return;
  localStorage.setItem("proEnabled", "false");
  updateStatus();
};
</script>

</body>
</html>
