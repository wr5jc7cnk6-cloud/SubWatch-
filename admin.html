<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubWatch ç®¡ç†äºº</title>

<!-- ã‚­ãƒ£ãƒƒã‚·ãƒ¥é˜²æ­¢ -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<style>
body {
  margin: 0;
  font-family: system-ui;
  background: #0b0b0b;
  color: white;
}

.center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  text-align: center;
}

.hidden { display: none; }

.card {
  background: #1c1c1e;
  padding: 20px;
  border-radius: 16px;
  margin-top: 20px;
}

input {
  padding: 14px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  width: 220px;
  text-align: center;
}

button {
  padding: 14px;
  font-size: 16px;
  border-radius: 14px;
  border: none;
  width: 100%;
}

.btn-primary { background: #0a84ff; color: white; }
.btn-danger { background: #ff453a; color: white; }

button:disabled { opacity: 0.4; }

.notice {
  color: #ff9f0a;
  margin-top: 12px;
}
</style>
</head>

<body>

<!-- ğŸ” ãƒ­ãƒƒã‚¯ -->
<div id="lock" class="center">
  <div>
    <h2>ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h2>
    <input type="password" id="passcode" placeholder="****">
    <br><br>
    <button class="btn-primary" onclick="unlock()">è§£é™¤</button>
    <p class="notice">â€» ä¸‹ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã§é–²è¦§ã®ã¿å¯èƒ½</p>
  </div>
</div>

<!-- ğŸ›  ç®¡ç† -->
<div id="admin" class="hidden center">
  <div style="width:90%;max-width:420px;">
    <h1>SubWatch ç®¡ç†äºº</h1>

    <p id="viewOnly" class="notice hidden">
      â€»é–²è¦§ãƒ¢ãƒ¼ãƒ‰ï¼ˆå¤‰æ›´ä¸å¯ï¼‰
    </p>

    <div class="card">
      <h3>Pro çŠ¶æ…‹</h3>
      <p id="status"></p>

      <button id="onBtn" class="btn-primary">Pro ON</button>
      <br><br>
      <button id="offBtn" class="btn-danger">Pro OFF</button>
    </div>
  </div>
</div>

<script>
let unlocked = false;
let startY = null;

// çŠ¶æ…‹è¡¨ç¤º
function refresh() {
  const enabled = localStorage.getItem("pro_enabled") === "1";
  status.textContent = enabled ? "ç¾åœ¨ï¼šPro åˆ©ç”¨å¯èƒ½" : "ç¾åœ¨ï¼šPro åˆ©ç”¨ä¸å¯";
}

// ãƒ‘ã‚¹è§£é™¤
function unlock() {
  if (passcode.value === "0823") {
    unlocked = true;
    lock.classList.add("hidden");
    admin.classList.remove("hidden");
    viewOnly.classList.add("hidden");
    onBtn.disabled = false;
    offBtn.disabled = false;
    refresh();
  } else {
    alert("ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
}

// ã‚¹ãƒ¯ã‚¤ãƒ—é–²è¦§
document.body.addEventListener("touchstart", e => {
  startY = e.touches[0].clientY;
});

document.body.addEventListener("touchmove", e => {
  if (unlocked) return;
  if (!startY) return;

  const now = e.touches[0].clientY;
  if (now - startY > 90) {
    lock.classList.add("hidden");
    admin.classList.remove("hidden");
    viewOnly.classList.remove("hidden");
    onBtn.disabled = true;
    offBtn.disabled = true;
    refresh();
  }
});

// ON/OFF
onBtn.onclick = () => {
  if (!unlocked) return;
  localStorage.setItem("pro_enabled", "1");
  refresh();
};

offBtn.onclick = () => {
  if (!unlocked) return;
  localStorage.setItem("pro_enabled", "0");
  refresh();
};

// åˆæœŸ
if (!localStorage.getItem("pro_enabled")) {
  localStorage.setItem("pro_enabled", "1");
}
</script>

</body>
</html>
