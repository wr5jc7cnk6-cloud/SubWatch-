<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubWatch Pro</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f4f4f4;
  margin: 0;
  padding: 20px;
}
.card {
  background: #fff;
  border-radius: 16px;
  padding: 20px;
  max-width: 420px;
  margin: auto;
}
.hidden { display: none; }
button, input {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  font-size: 16px;
}
.warning { color: red; font-weight: bold; }
</style>
</head>

<body>

<!-- ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ -->
<div id="splash" class="card">
  <h1>SubWatch</h1>
  <p>èµ·å‹•ä¸­...</p>
</div>

<!-- äººé–“èªè¨¼ -->
<div id="human" class="card hidden">
  <h2>ğŸ” ç¢ºèª</h2>
  <label><input type="checkbox" id="humanCheck"> ç§ã¯äººé–“ã§ã™</label>
  <button onclick="humanOK()">æ¬¡ã¸</button>
</div>

<!-- åˆ©ç”¨è¦ç´„ -->
<div id="tos" class="card hidden">
  <h2>ğŸ“œ åˆ©ç”¨è¦ç´„</h2>
  <p>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯è‡ªå·±è²¬ä»»ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
  <button onclick="agree()">åŒæ„ã—ã¦é–‹å§‹</button>
</div>

<!-- BANç”»é¢ -->
<div id="ban" class="card hidden">
  <h2>ğŸš« ã‚¢ã‚¯ã‚»ã‚¹ç¦æ­¢</h2>
  <p>ä½œã‚Šã™ãã¾ã—ãŸ</p>
  <input id="adminPass" type="password" placeholder="è§£é™¤ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
  <button onclick="unlock()">è§£é™¤</button>
</div>

<!-- ãƒ¡ã‚¤ãƒ³ -->
<div id="app" class="card hidden">
  <h1>SubWatch Pro</h1>

  <input id="name" placeholder="ã‚µãƒ–ã‚¹ã‚¯å">
  <input id="price" type="number" placeholder="æœˆé¡æ–™é‡‘">
  <button onclick="add()">è¿½åŠ </button>

  <p id="alert50k" class="warning hidden">
    âš  5ä¸‡å††ã‚’è¶…ãˆã¦ã„ã¾ã™
  </p>

  <ul id="list"></ul>
  <h3 id="total">åˆè¨ˆï¼šÂ¥0</h3>

  <p style="font-size:12px;color:#666;">
    â€» é–‹ç™ºä¸­ã§ã™ã€‚å®Œæˆã¾ã§ãŠå¾…ã¡ãã ã•ã„
  </p>
</div>

<script>
let banned = localStorage.getItem("banned") === "true";

setTimeout(() => {
  document.getElementById("splash").classList.add("hidden");

  if (banned) {
    document.getElementById("ban").classList.remove("hidden");
    return;
  }

  if (!localStorage.getItem("human")) {
    document.getElementById("human").classList.remove("hidden");
  } else if (!localStorage.getItem("tos")) {
    document.getElementById("tos").classList.remove("hidden");
  } else {
    showApp();
  }
}, 1200);

function humanOK() {
  if (!humanCheck.checked) return alert("ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„");
  localStorage.setItem("human", "yes");
  human.classList.add("hidden");
  tos.classList.remove("hidden");
}

function agree() {
  localStorage.setItem("tos", "yes");
  tos.classList.add("hidden");
  showApp();
}

function showApp() {
  app.classList.remove("hidden");
  render();
}

function add() {
  let count = Number(localStorage.getItem("count") || 0) + 1;
  localStorage.setItem("count", count);

  if (count > 20) {
    localStorage.setItem("banned", "true");
    location.reload();
    return;
  }

  const n = name.value;
  const p = Number(price.value);
  if (!n || !p) return;

  const data = JSON.parse(localStorage.getItem("subsPro") || "[]");
  data.push({ n, p });
  localStorage.setItem("subsPro", JSON.stringify(data));
  render();
}

function render() {
  const data = JSON.parse(localStorage.getItem("subsPro") || "[]");
  list.innerHTML = "";
  let total = 0;

  data.forEach(s => {
    total += s.p;
    const li = document.createElement("li");
    li.textContent = `${s.n}ï¼šÂ¥${s.p}`;
    list.appendChild(li);
  });

  totalEl = document.getElementById("total");
  totalEl.textContent = `åˆè¨ˆï¼šÂ¥${total}`;
  alert50k.classList.toggle("hidden", total <= 50000);
}

function unlock() {
  if (adminPass.value === "0823") {
    localStorage.clear();
    location.reload();
  } else {
    alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
}
</script>

</body>
</html>
