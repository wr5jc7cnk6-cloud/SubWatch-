<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>SubWatch Lite</title>
<style>
body { font-family: sans-serif; padding: 20px; }
input, button { padding: 6px; margin-right: 5px; }
.item { margin-top: 8px; }
</style>
</head>
<body>

<h1>SubWatch Lite</h1>
<p>Liteç‰ˆï¼ˆ5ä»¶ã¾ã§ï¼‰</p>

<input id="name" placeholder="åå‰">
<input id="price" type="number" placeholder="é‡‘é¡">
<button onclick="addItem()">è¿½åŠ </button>

<div id="list"></div>

<script>
const LIMIT = 5;
let items = JSON.parse(localStorage.getItem("lite_items") || "[]");
let warn = Number(localStorage.getItem("lite_warn") || 0);
let banned = localStorage.getItem("lite_ban") === "true";

if (banned) showBan();
render();

function addItem() {
  if (banned) return;

  const name = nameInput.value;
  const price = priceInput.value;

  if (!name || !price) return alert("æœªå…¥åŠ›ãŒã‚ã‚Šã¾ã™");

  if (items.length >= LIMIT) {
    warn++;
    localStorage.setItem("lite_warn", warn);

    if (warn >= 5) {
      localStorage.setItem("lite_ban", "true");
      showBan();
      return;
    }
    alert(`ç™»éŒ²ä¸Šé™ã§ã™ï¼ˆè­¦å‘Š ${warn}/5ï¼‰`);
    return;
  }

  items.push({ name, price });
  localStorage.setItem("lite_items", JSON.stringify(items));
  nameInput.value = priceInput.value = "";
  render();
}

function render() {
  list.innerHTML = "";
  items.forEach((i, idx) => {
    list.innerHTML += `
      <div class="item">
        ${i.name} / Â¥${i.price}
        <button onclick="del(${idx})">å‰Šé™¤</button>
      </div>`;
  });
}

function del(i) {
  items.splice(i, 1);
  localStorage.setItem("lite_items", JSON.stringify(items));
  render();
}

function showBan() {
  document.body.innerHTML = `
    <h2>ğŸš« BANã•ã‚Œã¾ã—ãŸ</h2>
    <p>è§£é™¤ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    <input id="code">
    <button onclick="unlock()">è§£é™¤</button>
    <br><br>
    <button onclick="goLine()">å…¬å¼LINE</button>`;
}

function unlock() {
  if (code.value === "SUBWATCH-UNLOCK") {
    localStorage.clear();
    location.reload();
  } else alert("ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
}

function goLine() {
  location.href = "https://line.me/R/ti/p/@254pdcli";
}
</script>
</body>
</html>
