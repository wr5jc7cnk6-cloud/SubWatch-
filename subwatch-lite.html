<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>SubWatch Lite</title>

<!-- アイコン -->
<link rel="icon" href="icon-lite.png">
<link rel="apple-touch-icon" href="icon-lite.png">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #fff;
  color: #000;
}

/* 起動画面 */
#splash {
  position: fixed;
  inset: 0;
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

#splash img {
  width: 180px;
  animation: fade 2s ease;
}

@keyframes fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* メイン */
#app {
  display: none;
  padding: 20px;
}

h1 {
  margin-top: 0;
}

input, button {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  font-size: 16px;
}

button {
  background: #4da3ff;
  color: white;
  border: none;
  border-radius: 8px;
}

.list {
  margin-top: 20px;
}

.item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.warning {
  color: red;
  font-weight: bold;
  margin-top: 10px;
}
</style>
</head>

<body>

<!-- 起動画面 -->
<div id="splash">
  <img src="icon-lite.png" alt="SubWatch Lite">
</div>

<!-- アプリ本体 -->
<div id="app">
  <h1>SubWatch Lite</h1>

  <input id="name" placeholder="サービス名">
  <input id="price" type="number" placeholder="月額料金（円）">
  <button onclick="add()">追加</button>

  <div class="list" id="list"></div>

  <h2>合計：<span id="total">0</span> 円</h2>
  <div id="warning" class="warning"></div>
</div>

<script>
/* 起動画面制御 */
setTimeout(() => {
  document.getElementById("splash").style.display = "none";
  document.getElementById("app").style.display = "block";
}, 2000);

/* データ */
let data = JSON.parse(localStorage.getItem("subwatch-lite") || "[]");

function save() {
  localStorage.setItem("subwatch-lite", JSON.stringify(data));
}

function render() {
  const list = document.getElementById("list");
  list.innerHTML = "";
  let total = 0;

  data.forEach((d, i) => {
    total += d.price;
    list.innerHTML += `
      <div class="item">
        <span>${d.name}</span>
        <span>${d.price}円</span>
      </div>
    `;
  });

  document.getElementById("total").textContent = total;

  document.getElementById("warning").textContent =
    total > 50000 ? "⚠ 追加しすぎではありませんか？" : "";
}

function add() {
  const name = document.getElementById("name").value;
  const price = Number(document.getElementById("price").value);

  if (!name || !price) return;

  data.push({ name, price });
  save();
  render();

  document.getElementById("name").value = "";
  document.getElementById("price").value = "";
}

render();
</script>

</body>
</html>
